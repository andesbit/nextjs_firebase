"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{285:(e,r,t)=>{t.d(r,{$:()=>d,r:()=>i});var s=t(5155),a=t(2115),n=t(9708),l=t(2085),o=t(9434);let i=(0,l.F)("inline-flex uppercase tracking-widest items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,asChild:d=!1,...c}=e,m=d?n.DX:"button";return(0,s.jsx)(m,{className:(0,o.cn)(i({variant:a,size:l,className:t})),ref:r,...c})});d.displayName="Button"},2523:(e,r,t)=>{t.d(r,{p:()=>l});var s=t(5155),a=t(2115),n=t(9434);let l=a.forwardRef((e,r)=>{let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"},3444:(e,r,t)=>{t.d(r,{A:()=>M});var s=t(5155),a=t(2177),n=t(2531),l=t(7610);let o=n.Ik({address1:n.Yj().min(1,"Address line 1 must contain a value"),address2:n.Yj().optional(),city:n.Yj().min(3,"City must contain at least 3 characters"),postcode:n.Yj().refine(e=>/^[A-Z]{1,2}[0-9]{1,2}[A-Z]?\s?[0-9][A-Z]{2}$/i.test(e),"Invalid UK postcode"),price:l.ai().positive("Price must be greater than zero"),description:n.Yj().min(40,"Description must contain at least 40 characters"),bedrooms:l.ai().min(0,"Bedrooms must be at least 0"),bathrooms:l.ai().min(0,"Bathrooms must be at least 0"),status:n.k5(["draft","for-sale","withdrawn","sold"])}),i=n.Ik({images:n.YO(n.Ik({id:n.Yj(),url:n.Yj(),file:n.Nl(File).optional()}))}),d=o.and(i);var c=t(221),m=t(7759),u=t(2115),x=t(3096),f=t(8893),p=t(9434);let h=f.bL;f.YJ;let g=f.WT,j=u.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(f.l9,{ref:r,className:(0,p.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[a,(0,s.jsx)(f.In,{asChild:!0,children:(0,s.jsx)(x.TBE,{className:"h-4 w-4 opacity-50"})})]})});j.displayName=f.l9.displayName;let b=u.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(f.PP,{ref:r,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(x.Mtm,{})})});b.displayName=f.PP.displayName;let v=u.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(f.wn,{ref:r,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(x.D3D,{})})});v.displayName=f.wn.displayName;let y=u.forwardRef((e,r)=>{let{className:t,children:a,position:n="popper",...l}=e;return(0,s.jsx)(f.ZL,{children:(0,s.jsxs)(f.UC,{ref:r,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,s.jsx)(b,{}),(0,s.jsx)(f.LM,{className:(0,p.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(v,{})]})})});y.displayName=f.UC.displayName,u.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(f.JU,{ref:r,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",t),...a})}).displayName=f.JU.displayName;let w=u.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(f.q7,{ref:r,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(f.VF,{children:(0,s.jsx)(x.Srz,{className:"h-4 w-4"})})}),(0,s.jsx)(f.p4,{children:a})]})});w.displayName=f.q7.displayName,u.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(f.wv,{ref:r,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=f.wv.displayName;var N=t(2523);let C=u.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("textarea",{className:(0,p.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a})});C.displayName="Textarea";var I=t(285),R=t(5294),z=t(6766);let k=(0,t(2085).F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"bg-green-600 text-white border-transparent",primary:"bg-sky-600 text-white border-transparent"}},defaultVariants:{variant:"default"}});function F(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)(k({variant:t}),r),...a})}var B=t(4416),S=t(2965);function J(e){let{images:r=[],onImagesChange:t,urlFormatter:a}=e,n=(0,u.useRef)(null);console.log({images:r});let l=(0,u.useCallback)(e=>{if(!e.destination)return;let s=Array.from(r),[a]=s.splice(e.source.index,1);s.splice(e.destination.index,0,a),t(s)},[t,r]),o=(0,u.useCallback)(e=>{t(r.filter(r=>r.id!==e))},[t,r]);return(0,s.jsxs)("div",{className:"w-full max-w-3xl mx-auto p-4",children:[(0,s.jsx)("input",{className:"hidden",ref:n,type:"file",multiple:!0,accept:"image/*",onChange:e=>{t([...r,...Array.from(e.target.files||[]).map((e,r)=>({id:"".concat(Date.now(),"-").concat(r,"-").concat(e.name),url:URL.createObjectURL(e),file:e}))])}}),(0,s.jsx)(I.$,{className:"w-full",variant:"outline",type:"button",onClick:()=>{var e;return null==n||null==(e=n.current)?void 0:e.click()},children:"Upload images"}),(0,s.jsx)(R.JY,{onDragEnd:l,children:(0,s.jsx)(R.gL,{droppableId:"property-images",direction:"vertical",children:e=>(0,s.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[r.map((e,r)=>(0,s.jsx)(R.sx,{draggableId:e.id,index:r,children:t=>(0,s.jsx)("div",{...t.draggableProps,...t.dragHandleProps,ref:t.innerRef,className:"relative p-2",children:(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg flex gap-2 items-center overflow-hidden",children:[(0,s.jsx)("div",{className:"size-16 w-16 h-16 relative",children:(0,s.jsx)(z.default,{src:a?a(e):e.url,alt:"",fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Image ",r+1]}),0===r&&(0,s.jsx)(F,{variant:"success",children:"Featured Image"})]}),(0,s.jsxs)("div",{className:"flex items-center p-2",children:[(0,s.jsx)("button",{className:"text-red-500 p-2",onClick:()=>o(e.id),children:(0,s.jsx)(B.A,{})}),(0,s.jsx)("div",{className:"text-gray-500",children:(0,s.jsx)(S.A,{})})]})]})})},e.id)),e.placeholder]})})})]})}function M(e){let{handleSubmit:r,submitButtonLabel:t,defaultValues:n}=e,l={address1:"",address2:"",city:"",postcode:"",price:0,bedrooms:0,bathrooms:0,status:"draft",description:"",images:[],...n&&{...n,price:n.price?Number(n.price):0,bedrooms:n.bedrooms?Number(n.bedrooms):0,bathrooms:n.bathrooms?Number(n.bathrooms):0}},o=(0,a.mN)({resolver:(0,c.u)(d),defaultValues:l});return(0,s.jsx)(m.lV,{...o,children:(0,s.jsxs)("form",{onSubmit:o.handleSubmit(r),children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("fieldset",{className:"flex flex-col gap-2",disabled:o.formState.isSubmitting,children:[(0,s.jsx)(m.zB,{control:o.control,name:"status",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Status"}),(0,s.jsx)(m.MJ,{children:(0,s.jsxs)(h,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(j,{children:(0,s.jsx)(g,{})}),(0,s.jsxs)(y,{children:[(0,s.jsx)(w,{value:"draft",children:"Draft"}),(0,s.jsx)(w,{value:"for-sale",children:"For Sale"}),(0,s.jsx)(w,{value:"withdrawn",children:"Withdrawn"}),(0,s.jsx)(w,{value:"sold",children:"Sold"})]})]})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"address1",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Address Line 1"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"address2",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Address Line 2"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"city",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"City"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"postcode",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Postcode"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r})}),(0,s.jsx)(m.C5,{})]})}})]}),(0,s.jsxs)("fieldset",{className:"flex flex-col gap-2",disabled:o.formState.isSubmitting,children:[(0,s.jsx)(m.zB,{control:o.control,name:"price",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Price"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r,type:"number",onChange:e=>r.onChange(Number(e.target.value)||0)})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"bedrooms",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Bedrooms"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r,type:"number",onChange:e=>r.onChange(Number(e.target.value)||0)})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"bathrooms",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Bathrooms"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(N.p,{...r,type:"number",onChange:e=>r.onChange(Number(e.target.value)||0)})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:o.control,name:"description",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Description"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(C,{...r,rows:5,className:"resize-none"})}),(0,s.jsx)(m.C5,{})]})}})]})]}),(0,s.jsx)(m.zB,{control:o.control,name:"images",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.MJ,{children:(0,s.jsx)(J,{onImagesChange:e=>{o.setValue("images",e)},images:r.value,urlFormatter:e=>e.file?e.url:"https://firebasestorage.googleapis.com/v0/b/fire-homes-course.appspot.com/o/".concat(encodeURIComponent(e.url),"?alt=media")})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(I.$,{type:"submit",className:"max-w-md mx-auto mt-2 w-full flex gap-2",disabled:o.formState.isSubmitting,children:t})]})})}},5057:(e,r,t)=>{t.d(r,{Label:()=>d});var s=t(5155),a=t(2115),n=t(968),l=t(2085),o=t(9434);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.b,{ref:r,className:(0,o.cn)(i(),t),...a})});d.displayName=n.b.displayName},6950:(e,r,t)=>{t.d(r,{d:()=>a});var s=t(4477);let a=(0,s.createServerReference)("7fb74a3a61d5e24a7434f6a45b5174db4301be668b",s.callServer,void 0,s.findSourceMapURL,"savePropertyImages")},7759:(e,r,t)=>{t.d(r,{C5:()=>g,MJ:()=>h,eI:()=>f,lR:()=>p,lV:()=>d,zB:()=>m});var s=t(5155),a=t(2115),n=t(9708),l=t(2177),o=t(9434),i=t(5057);let d=l.Op,c=a.createContext({}),m=e=>{let{...r}=e;return(0,s.jsx)(c.Provider,{value:{name:r.name},children:(0,s.jsx)(l.xI,{...r})})},u=()=>{let e=a.useContext(c),r=a.useContext(x),{getFieldState:t,formState:s}=(0,l.xW)(),n=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},x=a.createContext({}),f=a.forwardRef((e,r)=>{let{className:t,...n}=e,l=a.useId();return(0,s.jsx)(x.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:r,className:(0,o.cn)("space-y-2",t),...n})})});f.displayName="FormItem";let p=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:n,formItemId:l}=u();return(0,s.jsx)(i.Label,{ref:r,className:(0,o.cn)(n&&"text-destructive",t),htmlFor:l,...a})});p.displayName="FormLabel";let h=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:l,formDescriptionId:o,formMessageId:i}=u();return(0,s.jsx)(n.DX,{ref:r,id:l,"aria-describedby":a?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!a,...t})});h.displayName="FormControl",a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:n}=u();return(0,s.jsx)("p",{ref:r,id:n,className:(0,o.cn)("text-[0.8rem] text-muted-foreground",t),...a})}).displayName="FormDescription";let g=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e,{error:l,formMessageId:i}=u(),d=l?String(null==l?void 0:l.message):a;return d?(0,s.jsx)("p",{ref:r,id:i,className:(0,o.cn)("text-[0.8rem] font-medium text-destructive",t),...n,children:d}):null});g.displayName="FormMessage"},8234:(e,r,t)=>{let s,a;t.d(r,{I:()=>a,j:()=>s});var n=t(3915),l=t(6203),o=t(858);let i=(0,n.Dk)();if(i.length){let e=i[0];s=(0,l.xI)(e),a=(0,o.c7)(e)}else{let e=(0,n.Wp)({apiKey:"AIzaSyAhdJpA6zZergpf-X2lRFWYfVtr5jlwNe4",authDomain:"nextfifo.firebaseapp.com",projectId:"nextfifo",storageBucket:"nextfifo.firebasestorage.app",messagingSenderId:"230621740189",appId:"1:230621740189:web:83244ec8f636c54cc6e874"});s=(0,l.xI)(e),a=(0,o.c7)(e)}},9434:(e,r,t)=>{t.d(r,{cn:()=>n});var s=t(2596),a=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}}]);