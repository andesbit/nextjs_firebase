(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{2082:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.bind(a,6290))},6290:(e,r,a)=>{"use strict";a.d(r,{default:()=>f});var t=a(5155),s=a(3444),i=a(8234);let l=(0,a(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var o=a(4477);let d=(0,o.createServerReference)("7f2565532351b8b47e87b8e972f47ede661bde22fb",o.callServer,void 0,o.findSourceMapURL,"updateProperty");var n=a(5695),u=a(858),c=a(6950),p=a(6671);function f(e){let{id:r,address1:a,address2:o,city:f,postcode:h,bathrooms:v,bedrooms:b,description:m,price:y,status:k,images:R=[]}=e,j=(0,n.useRouter)(),w=async e=>{var a;let t=await (null===i.j||void 0===i.j||null==(a=i.j.currentUser)?void 0:a.getIdToken());if(!t)return;let{images:s,...l}=e,o=await d({...l,id:r},t);if(null==o?void 0:o.error)return void p.oR.error("Error!",{description:o.message});let n=[];R.filter(e=>!s.find(r=>e===r.url)).forEach(e=>{n.push((0,u.XR)((0,u.KR)(i.I,e)))});let f=[];s.forEach((e,a)=>{if(e.file){let t="properties/".concat(r,"/").concat(Date.now(),"-").concat(a,"-").concat(e.file.name);f.push(t);let s=(0,u.KR)(i.I,t);n.push((0,u.bp)(s,e.file))}else f.push(e.url)}),await Promise.all(n),await (0,c.d)({propertyId:r,images:f},t),p.oR.success("Success!",{description:"Property updated"}),j.push("/admin-dashboard")};return(0,t.jsx)("div",{children:(0,t.jsx)(s.A,{handleSubmit:w,submitButtonLabel:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{})," Save Property"]}),defaultValues:{address1:a,address2:o,city:f,postcode:h,bathrooms:v,bedrooms:b,description:m,price:y,status:k,images:R.map(e=>({id:e,url:e}))}})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[811,105,309,848,680,874,299,891,63,263,925,641,615,441,684,358],()=>r(2082)),_N_E=e.O()}]);